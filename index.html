<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Corbin‚Äôs Wishlist (Editable)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <style>
    body { font-family: sans-serif; background:#0f172a; color:#e5e7eb; margin:0; }
    .container { max-width: 960px; margin:auto; padding:20px; }
    .item { display:flex; justify-content:space-between; background:#1e293b; padding:10px; margin:8px 0; border-radius:8px; }
    .actions button { margin-left:8px; }
    form { display:flex; flex-wrap:wrap; gap:8px; margin:12px 0; }
    input { padding:6px; border-radius:6px; border:1px solid #334155; flex:1; }
    button { padding:6px 12px; border:none; border-radius:6px; color:white; cursor:pointer; }
    button.add { background:#22c55e; }
    button.delete { background:#ef4444; }
    button.claim { background:#3b82f6; }
  </style>
</head>
<body>
  <div class="container">
    <h1>üéÅ Corbin‚Äôs Wishlist</h1>
    <div id="app"></div>
  </div>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycby_NQTc7-DplCnM1qknJCGqmG8UcreEmTnFxrxn1AJ608V9uZAi3lFnKFKK2DQ2A5Zj-Q/exec"; // replace with your Apps Script URL
const { useState, useEffect } = React;

function App() {
  const [items, setItems] = useState([]);
  const [form, setForm] = useState({category:"", name:"", priceText:"", url:"", imageUrl:""});
  const [yourName, setYourName] = useState("");

  async function load() {
    const res = await fetch(SCRIPT_URL);
    const data = await res.json();
    setItems(data);
  }

  async function addItem(e) {
    e.preventDefault();
    await fetch(SCRIPT_URL, {
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({action:"addItem", ...form})
    });
    setForm({category:"", name:"", priceText:"", url:"", imageUrl:""});
    load();
  }

  async function deleteItem(name) {
    await fetch(SCRIPT_URL, {
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({action:"deleteItem", name})
    });
    load();
  }

  async function claimItem(name) {
    if (!yourName.trim()) { alert("Enter your name first."); return; }
    const notes = prompt("Optional note (size, color, etc.):") || "";
    await fetch(SCRIPT_URL, {
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({action:"claimItem", item:name, claimedBy:yourName, notes})
    });
    load();
  }

  useEffect(()=>{ load(); },[]);

  return (
    React.createElement("div", null,
      React.createElement("input", {
        placeholder:"Your name for claims",
        value:yourName,
        onChange:e=>setYourName(e.target.value)
      }),
      React.createElement("form", {onSubmit:addItem},
        Object.keys(form).map(key =>
          React.createElement("input", {
            key, placeholder:key, value:form[key],
            onChange:e=>setForm({...form,[key]:e.target.value})
          })
        ),
        React.createElement("button",{type:"submit",className:"add"},"Add Item")
      ),
      items.map(item =>
  React.createElement("div",{className:"item",key:item.name},
    React.createElement("div",null,
      React.createElement("strong",null,item.name),
      " ‚Äî ", item.category, " ‚Äî ", item.priceText,
      item.claimedBy ? ` (Claimed by ${item.claimedBy})` : "",
      item.imageUrl ? React.createElement("div",null,
        React.createElement("img",{
          src:item.imageUrl,
          alt:item.name,
          style:{maxWidth:"150px",marginTop:"8px",borderRadius:"6px"}
        })
      ) : null
    ),
    React.createElement("div",{className:"actions"},
      React.createElement("a",{href:item.url,target:"_blank"},"View"),
      React.createElement("button",{className:"claim",onClick:()=>claimItem(item.name)},"Claim"),
      React.createElement("button",{className:"delete",onClick:()=>deleteItem(item.name)},"Delete")
    )
  )
)
    )
  );
}

ReactDOM.createRoot(document.getElementById("app")).render(React.createElement(App));
</script>
</body>
</html>
